(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{19:function(e,t,n){e.exports=n.p+"static/media/mine.28570de7.svg"},20:function(e,t,n){e.exports=n.p+"static/media/flag.b32b01e6.svg"},21:function(e,t,n){e.exports=n(29)},26:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a,r,l=n(0),s=n.n(l),o=n(17),i=n.n(o),c=(n(26),n(13)),u=n(15),m=n(3),h=n(4),d=n(5),f=n(14),v=n(12),b=n(11),p=n(7),k=n.n(p),g=n(18),C=n(1),y=n(2),M=n(8),w=n.n(M);!function(e){e[e.Win=0]="Win",e[e.Lose=1]="Lose",e[e.InProgress=2]="InProgress"}(a||(a={})),function(e){e[e.Mine=0]="Mine",e[e.Maybe=1]="Maybe"}(r||(r={}));var O=Object(y.b)({kind:"covered",marker:void 0}),x=Object(y.b)({kind:"exposed",exploded:!1,numMinesNearby:0}),j=Object(y.b)({hasMine:!1,state:O()});function E(e){var t=N(e.state)?x(e.state):O(e.state);return j(e).set("state",t)}function N(e){return"exposed"===e.kind}var S=Object(y.b)({cells:Object(y.a)(),numRows:0,numColumns:0,numMines:0,minesAllocated:!1});function _(e){return"function"===typeof(null===e||void 0===e?void 0:e[Symbol.iterator])}var R,I=function(){function e(){if(Object(h.a)(this,e),this.state=void 0,y.b.isRecord(arguments.length<=0?void 0:arguments[0]))this.state=arguments.length<=0?void 0:arguments[0];else{var t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];if(_(arguments.length<=2?void 0:arguments[2])){var a=Object(y.a)(arguments.length<=2?void 0:arguments[2]);if(a.size!==t*n)throw Error("Length of cells must be numRows * numColumns");this.state=S({cells:a.map((function(e){return E(e)})),numRows:t,numColumns:n,numMines:a.reduce((function(e,t){return t.hasMine?e+1:e}),0),minesAllocated:!0})}else{var r,l=null!==(r=arguments.length<=2?void 0:arguments[2])&&void 0!==r?r:0,s=y.a.of.apply(y.a,Object(u.a)(w.a.fill(Array(t*n),j())));this.state=S({cells:s,numRows:t,numColumns:n,numMines:l})}}}return Object(d.a)(e,[{key:"toJSON",value:function(){return this.state.toJSON()}},{key:"neighborCoords",value:function(e,t){var n=this;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].map((function(n){var a=Object(C.a)(n,2),r=a[0],l=a[1];return[r+e,l+t]})).filter((function(e){var t=Object(C.a)(e,2),a=t[0],r=t[1];return a>=0&&a<n.numRows&&r>=0&&r<n.numColumns}))}},{key:"neighbors",value:function(e,t){var n=this;return this.neighborCoords(e,t).map((function(e){var t=Object(C.a)(e,2),a=t[0],r=t[1];return[[a,r],n.cellState(a,r)]}))}},{key:"cellState",value:function(e,t){return this.cell(e,t).state}},{key:"clearCell",value:function(t,n){var a=this,r=this.cell(t,n);if(N(r.state))return this;if(!this.state.minesAllocated){var l=this.neighborCoords(t,n).concat([[t,n]]).map((function(e){var t=Object(C.a)(e,2),n=t[0],r=t[1];return a.getIndex(n,r)})),s=w.a.difference(w.a.range(this.numRows*this.numColumns),l),o=new Set(w.a.sampleSize(s,this.state.numMines)),i=this.state.cells.map((function(e,t){return e.set("hasMine",o.has(t))}));return new e(this.state.merge({cells:i,minesAllocated:!0})).clearCell(t,n)}var c=r.set("state",this.getClearedCellState(t,n));return this.setCell(t,n,c)}},{key:"clearNeighbors",value:function(t,n){var a=this,l=this.cell(t,n);if(!N(l.state)||l.state.exploded)return this;if(this.neighbors(t,n).filter((function(e){var t=Object(C.a)(e,2),n=(t[0],t[1]);return"covered"===n.kind&&n.marker===r.Mine})).length!==l.state.numMinesNearby)return this;var s=new Set(this.neighbors(t,n).filter((function(e){var t=Object(C.a)(e,2),n=(t[0],t[1]);return"covered"===n.kind&&n.marker!==r.Mine})).map((function(e){var t=Object(C.a)(e,2),n=Object(C.a)(t[0],2),r=n[0],l=n[1];t[1];return a.getIndex(r,l)}))),o=function(e){return[Math.floor(e/a.numColumns),e%a.numColumns]},i=this.state.cells.withMutations((function(e){for(;s.size>0;){var t=s.values().next().value;s.delete(t);var n=o(t),r=Object(C.a)(n,2),l=r[0],i=r[1],c=a.getClearedCellState(l,i);if(e=e.set(t,e.get(t).set("state",c)),"exposed"===c.kind&&!c.exploded&&0===c.numMinesNearby){var u,m=Object(g.a)(a.neighborCoords(l,i));try{for(m.s();!(u=m.n()).done;){var h=u.value;"covered"===e.get(a.getIndex(h[0],h[1])).state.kind&&s.add(a.getIndex(h[0],h[1]))}}catch(d){m.e(d)}finally{m.f()}}}}));return new e(this.state.set("cells",i))}},{key:"markCell",value:function(e,t,n){var a=this.cell(e,t);if(N(a.state))throw Error("Can't mark exposed cell: {row: ".concat(e,", col: ").concat(t,"}"));var r=a.setIn(["state","marker"],n);return this.setCell(e,t,r)}},{key:"getIndex",value:function(e,t){return e*this.numColumns+t}},{key:"validateCoord",value:function(e,t){if(e<0||e>=this.numRows||t<0||t>=this.numColumns)throw Error("{row: ".concat(e,", col: ").concat(t,"} out of bounds.  numRows: ").concat(this.numRows,", numColumns: ").concat(this.numColumns))}},{key:"getClearedCellState",value:function(e,t){var n=this,a=this.neighborCoords(e,t).filter((function(e){var t=Object(C.a)(e,2),a=t[0],r=t[1];return n.cell(a,r).hasMine})).length;return x({exploded:this.cell(e,t).hasMine,numMinesNearby:a})}},{key:"cell",value:function(e,t){this.validateCoord(e,t);var n=this.state.cells.get(this.getIndex(e,t));if(n)return n;throw Error("(".concat(e,", ").concat(t,") out of bounds"))}},{key:"setCell",value:function(t,n,a){var r=this.state.cells.set(this.getIndex(t,n),a);return new e(this.state.set("cells",r))}},{key:"numRows",get:function(){return this.state.numRows}},{key:"numColumns",get:function(){return this.state.numColumns}},{key:"numExposed",get:function(){return this.state.cells.reduce((function(e,t){return N(t.state)?e+1:e}),0)}},{key:"gameInfo",get:function(){var e,t=w.a.countBy(this.state.cells.toArray(),(function(e){return N(e.state)?e.state.exploded?"exploded":"cleared":e.state.marker===r.Mine?"mine":"covered"}));return e=(t=Object(m.a)({exploded:0,cleared:0,mine:0,covered:0},t)).exploded>0?a.Lose:t.mine===this.state.numMines&&0===t.covered?a.Win:a.InProgress,{numMines:this.state.numMines,numExploded:t.exploded,numMarkedMines:t.mine,status:e}}}]),e}(),B=n(9),A=n.n(B),P=n(19),L=n.n(P),W=n(20),F=n.n(W),H=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"onClick",value:function(e){e.ctrlKey||this.props.handleCellClick(this.props.row,this.props.column,e)}},{key:"onRightClick",value:function(e){e.preventDefault(),this.props.handleCellClick(this.props.row,this.props.column,e)}},{key:"render",value:function(){var e=this,t=this.props.cell,n=" ",a=[A.a.cell];if(N(t))if(t.exploded)a.push(A.a.cellExploded),n=s.a.createElement("img",{src:L.a,alt:"mine"});else{a.push(A.a.cellExposed);var l=t.numMinesNearby;0!==l&&(n="".concat(l))}else switch(t.marker){case r.Mine:n=s.a.createElement("img",{src:F.a,alt:"flag"});break;case r.Maybe:n="?"}return s.a.createElement("button",{className:a.join(" "),onClick:function(t){return e.onClick(t)},onContextMenu:function(t){return e.onRightClick(t)}},n)}}]),n}(s.a.PureComponent),J=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderCell",value:function(e,t){return s.a.createElement(H,{key:"".concat(e,"_").concat(t),cell:this.props.game.cellState(e,t),row:e,column:t,handleCellClick:this.props.handleCellClick})}},{key:"render",value:function(){for(var e=this.props.game,t=[],n=0;n<e.numRows;n++){for(var a=[],r=0;r<e.numColumns;r++)a[r]=this.renderCell(n,r);t[n]=s.a.createElement("div",{key:n,className:A.a.boardRow},a)}return s.a.createElement("div",{className:A.a.board},t)}}]),n}(s.a.PureComponent);!function(e){e[e.Clear=0]="Clear",e[e.ClearNeighbors=1]="ClearNeighbors",e[e.MarkMine=2]="MarkMine",e[e.MarkMaybe=3]="MarkMaybe"}(R||(R={}));var K=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(h.a)(this,n),a=t.call(this,e);var r=new I(16,30,100);return a.state={numRows:16,numColumns:30,numMines:100,game:r,history:[]},a.handleCellClick=a.handleCellClick.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"handleCellClick",value:function(e,t,n){var l=R.Clear;2===n.button||n.ctrlKey?l=R.MarkMine:n.altKey&&(l=R.MarkMaybe),this.setState((function(n){var s=n.game;if(s.gameInfo.status===a.InProgress){var o=s.cellState(e,t),i=s;switch("exposed"===o.kind&&l===R.Clear&&(l=R.ClearNeighbors),l){case R.Clear:var c=(i=s.clearCell(e,t)).cellState(e,t);"exposed"===c.kind&&0===c.numMinesNearby&&(i=i.clearNeighbors(e,t));break;case R.MarkMine:case R.MarkMaybe:if("covered"===o.kind){var h=l===R.MarkMaybe?r.Maybe:r.Mine;i=s.markCell(e,t,o.marker===h?void 0:h)}break;case R.ClearNeighbors:i=s.clearNeighbors(e,t);break;default:throw Error("Unexpected command: ".concat(l))}return Object(m.a)(Object(m.a)({},n),{},{game:i,history:[].concat(Object(u.a)(n.history),[s])})}}))}},{key:"newGame",value:function(){this.setState((function(e){return Object(m.a)(Object(m.a)({},e),{},{game:new I(e.numRows,e.numColumns,e.numMines),history:[]})}))}},{key:"undoMove",value:function(){this.state.history.length>0&&this.setState((function(e){return{game:e.history[e.history.length-1],history:e.history.slice(0,e.history.length-1)}}))}},{key:"linkStateHandler",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(a){var r=n(a.target.value);t.setState((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(c.a)({},e,r))}))}}},{key:"render",value:function(){var e,t=this,n=this.state.game.gameInfo;switch(n.status){case a.InProgress:e="In Progress";break;case a.Lose:e="You lose! :(";break;case a.Win:e="You win! :)"}return s.a.createElement("div",{className:k.a.app},s.a.createElement("h1",null,this.props.name),s.a.createElement("ul",null,s.a.createElement("li",null,"Click a covered cell to clear it"),s.a.createElement("li",null,"Click a cleared cell to clear neighbors of cleared cell"),s.a.createElement("li",null,"Right-click or Ctrl-click to mark a cell as a mine"),s.a.createElement("li",null,"Alt-click or Option-click to mark a cell with ?")),s.a.createElement("div",{className:k.a.gameConfig},s.a.createElement("label",{htmlFor:"num-rows"},"Number of rows: "),s.a.createElement("input",{type:"number",className:k.a.numberInput,value:this.state.numRows,onChange:this.linkStateHandler("numRows",Number),id:"num-rows"}),s.a.createElement("label",{htmlFor:"num-columns"},"Number of columns: "),s.a.createElement("input",{type:"number",className:k.a.numberInput,value:this.state.numColumns,onChange:this.linkStateHandler("numColumns",Number),id:"num-columns"}),s.a.createElement("label",{htmlFor:"num-mines"},"Number of mines: "),s.a.createElement("input",{type:"number",className:k.a.numberInput,value:this.state.numMines,onChange:this.linkStateHandler("numMines",Number),id:"num-mines"})),s.a.createElement("div",{style:{marginBottom:"5px"}},"Status: ",e),s.a.createElement("div",{style:{marginBottom:"5px"}},"Mines left: ",n.numMines-n.numMarkedMines,s.a.createElement("button",{onClick:function(){return t.newGame()},style:{marginLeft:"10px"}},"New Game"),s.a.createElement("button",{onClick:function(){return t.undoMove()},style:{marginLeft:"10px"}},"Undo")),s.a.createElement(J,{game:this.state.game,handleCellClick:this.handleCellClick}))}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(K,{name:"Minesweeper"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports={app:"App_app__1kX79",gameConfig:"App_gameConfig__2Ko4Q"}},9:function(e,t,n){e.exports={cell:"MinesweeperBoard_cell__1S_DF",cellExposed:"MinesweeperBoard_cellExposed__tBCu7",cellExploded:"MinesweeperBoard_cellExploded__3ofE_",boardRow:"MinesweeperBoard_boardRow__uP-Eo",board:"MinesweeperBoard_board__30y8x"}}},[[21,1,2]]]);
//# sourceMappingURL=main.c154259a.chunk.js.map